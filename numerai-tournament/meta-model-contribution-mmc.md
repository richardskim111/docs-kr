# 메타 모델 공헌도 (MMC)

## **동기**

뉴머라이는 토너먼트 안에서 참가자 개개인이 높은 상관계수(Corr)를 달성하는데에 동기부여가 되도록 수치에 결부된 NMR 금액을 페이아웃하는 구조가 있습니다.

한편 뉴머라이는 참가자로부터 제출받은 예측 파일을 변환하여 뉴머라이에서 사용할 수 있는 형태로 만듭니다. 이 때 뉴머라이는 전참가자의 예측치를 각 참가자의 NMR 스테이크량으로 가중한 앙상블 모델 (메타 모델)을 작성합니다. 뉴머라이는 메타 모델의 Corr을 높이는 것을 목표로 하고 있습니다. 하지만 참가자들의 개개인들의 높은 Corr을 달성하려는 동기와 뉴머라의 메타 모델의 Corr을 높이려는 동기는 결합된 인센티트브 구조로는 반드시 이어지지는 않습니다.

따라서 뉴머라이는 Meta Model Contribution (메타모델 공헌도 MMC) 라고 하는 지표를 도입하여 참가자에게 Corr이외 보수를 주는 새로운 구조를 만들었습니다.

Corr은 참가자 개인 예측값의 성능에 보수를 부여하는데 반해 MMC는 메타 모델의 상관계수 다시말해 그룹 퍼포먼스에 대한 공헌에 보수를 부여합니다.

{% hint style="info" %}
여러분이 월드컵 국가대표 선수팀의 감독이라고 상상해보새요. 손흥민 선수가 10명 복제된 팀이 있다면 마지막 선수를 또 1명의 손흥민 선수를 영입하는게 팀에 유리할까요? 아니면 전혀 다른 스타일에 선수 (예: 박지성)을 영입하는게 팀에 유리할까요?
{% endhint %}

{% hint style="success" %}
2019년부터 integration\_test와 같은 결정 트리 학습법을 기반한 모델들이 좋은 퍼포먼스를 보여주고 있고 많은 참가자들 사이에서 인기가 있습니다. 이러한 상황에서 Corr을 최대화하면서 MMC를 최대화하고 싶을 경우 어떠한 모델을 설계를 하면 좋을까요?

정답은 다른 사람들이 생각하지 않는 독창적인 방식으로 모델을 작성하고 예측 파일을 제출하면 MMC를 높일 수 있게 됩니다.
{% endhint %}

## MMC의 계산방법 <a href="#calculation" id="calculation"></a>

특정 라운드의 참가자의 MMC는 아래 순서로 계산됩니다.

* NMR을 참가자 중 67%를 무작위로 선택합니다. (복원추출법 적용)
* 이러한 참가자가 스테이킹 하고 있는 NMR의 양을 이용해 가중된 예측치를 계산합니다.
* 가중된 예측치와 참가자 모델을 모두 동일분포로 변환합니다.
* 위의 예측치와 참가자 모델을 중화시킵니다. 중화란 가중된 예측값과 참가자의 모델을 선형 회귀해 그 차분을 계산하는 것입니다.
* 참가자 모델과 타겟 (target) 사이의 공분산을 계산합니다.
* 이 값을 0.0841로 나눕니다 (이 스텝은 MMC 스코어를 Corr과 같은 단위로 하기 위함입니다)
* 이 전체의 프로세스를 20회 반복하는 것으로 MMC의 평균 스코어가 계산 됩니다.

## MMC 디자인에 대해서

* MMC 시스템이 시빌공격에 취약하지 않도록 하려면 각 참가자가 스테이킹한 NMR로 가중화하는 수단이 필요합니다.
* 다중성을 높이기 위해 매회 67%의 참가자를 랜덤 샘플링합니다. 만약 이 메커니즘이 없다면 자신과 비슷한 파일을 제출한 사람이 고액의 NMR을 스테이킹 하고 있었을 경우 과도한 페널티가 부과될 가능성이 있습니다.

## 논의 <a href="#discussion" id="discussion"></a>

보다 자세한 MMC의 계산에 대해서는 [이 글](https://forum.numer.ai/t/mmc2-announcement/93)을, MMC와 수익성에 대해서는 [이 글](https://forum.numer.ai/t/mmc-staking-change-corr-mmc/698)을, MMC와 독창성의 가치에 대해서는 [이 Medium의 기사](https://medium.com/numerai/a-new-data-science-competition-where-being-different-pays-251c2aecc40a)를 읽어 주세요.
